import type { LanguageCode } from "@nightscout/shared-types";

const EN = {
  appTitle: "Glucose cockpit",
  appSubtitle: "Live glucose view powered by Nightscout and Integrations API.",
  home: "Home",
  bolus: "Bolus",
  settings: "Settings",
  menu: "Menu",
  close: "Close",
  sourceLive: "Live API",
  sourceCache: "Cache",
  openWidget: "Open widget",
  refreshNow: "Refresh now",
  refreshing: "Refreshing...",
  chartTitle: "Last 24 hours",
  trendNow: "Current trend",
  metricsTitle: "Current metrics",
  tirTitle: "Time In Range",
  inRange: "in range",
  low: "Low",
  high: "High",
  points: "points",
  current: "Current",
  delta: "Delta",
  trend: "Trend",
  updatedAt: "Updated at",
  iob: "IOB",
  cob: "COB",
  steps24h: "Steps 24h",
  weight: "Weight",
  settingsIntro: "Configure the desktop app from this page.",
  appSettings: "App settings",
  language: "Language",
  startWithWindows: "Start with Windows",
  saveAppSettings: "Save app settings",
  connectionSettings: "Nightscout connection",
  baseUrl: "Nightscout base URL",
  readToken: "Read token",
  displayUnits: "Display units",
  saveConnection: "Save connection",
  removeToken: "Remove token",
  integrationSettings: "Integrations API",
  integrationApiUrl: "Integrations API URL",
  integrationReadToken: "Integrations read token",
  saveIntegration: "Save integration settings",
  syncIntegration: "Sync integrations now",
  removeIntegrationToken: "Remove integrations token",
  saving: "Saving...",
  syncing: "Syncing...",
  languageFrench: "French",
  languageEnglish: "English",
  configured: "configured",
  missing: "missing",
  noValues: "No values available yet.",
  noTir: "No TIR data available yet.",
  profileSettings: "Insulin therapy profile",
  ratioWindows: "Ratio windows",
  targetWindows: "Target windows",
  start: "Start",
  end: "End",
  gramsPerUnit: "g / 1U",
  action: "Action",
  remove: "Remove",
  correctionFactor: "Correction factor (g/L dropped by 1U)",
  targetLow: "Target low (g/L)",
  targetHigh: "Target high (g/L)",
  insulinActionHours: "Insulin action (hours)",
  carbAbsorptionHours: "Carb absorption (hours)",
  addRatioWindow: "Add ratio window",
  addTargetWindow: "Add target window",
  saveProfile: "Save profile",
  insulinAdvisorTitle: "Insulin advisor (estimate)",
  advisorDisclaimer:
    "Advisor uses editable profile, IOB and COB. This remains an estimate, not a prescription.",
  awaitingInput: "Awaiting input",
  aboveTarget: "Above target",
  belowTarget: "Below target",
  inTargetRange: "In target range",
  carbsGrams: "Carbs (g)",
  currentGlucoseGL: "Current glucose (g/L)",
  mealTime: "Meal time",
  useLiveGlucose: "Use live glucose",
  liveGlucose: "Live glucose",
  lowGlucoseWarning:
    "Current glucose is below target. Treat low glucose first and confirm decisions with your clinical plan.",
  carbRatioUsed: "Carb ratio used",
  mealBolus: "Meal bolus",
  correctionBolus: "Correction bolus",
  adjustedTotal: "Adjusted total (IOB/COB)",
  roundedDose: "Rounded (0.5 U)",
  profileNotLoaded: "Insulin profile is not loaded yet.",
  advisorAwaitingValues: "Enter carbs and current glucose to calculate an estimate.",
  advisorNumericOnly: "Carbs and glucose must be numeric values.",
  advisorCalculationFailed: "Unable to calculate insulin estimate.",
  profileSaved: "Insulin profile saved.",
  integrationSettingsSaved: "Integration settings saved.",
  integrationTokenRemoved: "Integration token removed.",
  appSettingsSaved: "App settings saved.",
  inferredMeal: "Inferred meal",
  sensitivityAssistantTitle: "Insulin sensitivity assistant",
  sensitivityNoData: "No enough correction samples yet.",
  sampleCount: "Sample count",
  avgDropPerUnit: "Average drop / 1U",
  suggestedFactor: "Suggested factor",
  confidence: "Confidence",
  confidence_low: "Low",
  confidence_medium: "Medium",
  confidence_high: "High",
  healthScoreTitle: "Health score card",
  overallScore: "Overall score",
  tirScore: "TIR score",
  variabilityScore: "Variability score",
  hypoBurdenScore: "Hypo burden score",
  trendStabilityScore: "Trend stability score",
  cvMetric: "CV",
  inRangeMetric: "In range",
  lowMetric: "Low burden",
  noHealthScore: "Not enough data for health score.",
  widgetLayout: "Widget layout",
  widgetLayoutMinimal: "Minimal",
  widgetLayoutCompact: "Compact",
  widgetLayoutChart: "Chart",
  widgetLayoutSaved: "Widget layout saved."
} as const;

const FR = {
  appTitle: "Cockpit glycemie",
  appSubtitle: "Vue glycemique en direct avec Nightscout et l'API d'integration.",
  home: "Accueil",
  bolus: "Bolus",
  settings: "Parametres",
  menu: "Menu",
  close: "Fermer",
  sourceLive: "API live",
  sourceCache: "Cache",
  openWidget: "Ouvrir le widget",
  refreshNow: "Actualiser",
  refreshing: "Actualisation...",
  chartTitle: "Dernieres 24 heures",
  trendNow: "Tendance actuelle",
  metricsTitle: "Metriques",
  tirTitle: "Time In Range",
  inRange: "dans la cible",
  low: "Bas",
  high: "Haut",
  points: "points",
  current: "Actuelle",
  delta: "Delta",
  trend: "Tendance",
  updatedAt: "Mise a jour",
  iob: "IOB",
  cob: "COB",
  steps24h: "Pas 24h",
  weight: "Poids",
  settingsIntro: "Configure l'application desktop depuis cette page.",
  appSettings: "Preferences app",
  language: "Langue",
  startWithWindows: "Demarrer avec Windows",
  saveAppSettings: "Enregistrer preferences",
  connectionSettings: "Connexion Nightscout",
  baseUrl: "URL Nightscout",
  readToken: "Token lecture",
  displayUnits: "Unites d'affichage",
  saveConnection: "Enregistrer connexion",
  removeToken: "Supprimer token",
  integrationSettings: "API d'integration",
  integrationApiUrl: "URL API d'integration",
  integrationReadToken: "Token lecture integration",
  saveIntegration: "Enregistrer integration",
  syncIntegration: "Synchroniser maintenant",
  removeIntegrationToken: "Supprimer token integration",
  saving: "Enregistrement...",
  syncing: "Synchronisation...",
  languageFrench: "Francais",
  languageEnglish: "Anglais",
  configured: "configure",
  missing: "manquant",
  noValues: "Aucune valeur disponible.",
  noTir: "Pas encore de donnees TIR.",
  profileSettings: "Profil insulinotherapie",
  ratioWindows: "Plages ratios",
  targetWindows: "Plages cibles",
  start: "Debut",
  end: "Fin",
  gramsPerUnit: "g / 1U",
  action: "Action",
  remove: "Supprimer",
  correctionFactor: "Facteur de correction (g/L baisses par 1U)",
  targetLow: "Cible basse (g/L)",
  targetHigh: "Cible haute (g/L)",
  insulinActionHours: "Action de l'insuline (heures)",
  carbAbsorptionHours: "Absorption glucides (heures)",
  addRatioWindow: "Ajouter une plage ratio",
  addTargetWindow: "Ajouter une plage cible",
  saveProfile: "Enregistrer profil",
  insulinAdvisorTitle: "Conseil bolus (estimation)",
  advisorDisclaimer:
    "Le calcul utilise le profil editable, IOB et COB. Cela reste une estimation, pas une prescription.",
  awaitingInput: "En attente de saisie",
  aboveTarget: "Au-dessus de la cible",
  belowTarget: "Sous la cible",
  inTargetRange: "Dans la cible",
  carbsGrams: "Glucides (g)",
  currentGlucoseGL: "Glycemie actuelle (g/L)",
  mealTime: "Heure du repas",
  useLiveGlucose: "Utiliser la glycemie live",
  liveGlucose: "Glycemie live",
  lowGlucoseWarning:
    "La glycemie est sous la cible. Traite d'abord l'hypo et confirme toute decision avec ton plan clinique.",
  carbRatioUsed: "Ratio utilise",
  mealBolus: "Bolus repas",
  correctionBolus: "Bolus correction",
  adjustedTotal: "Total ajuste (IOB/COB)",
  roundedDose: "Arrondi (0.5 U)",
  profileNotLoaded: "Le profil insulinotherapie n'est pas encore charge.",
  advisorAwaitingValues: "Saisis les glucides et la glycemie pour calculer une estimation.",
  advisorNumericOnly: "Les champs glucides et glycemie doivent etre numeriques.",
  advisorCalculationFailed: "Impossible de calculer l'estimation de bolus.",
  profileSaved: "Profil insulinotherapie enregistre.",
  integrationSettingsSaved: "Parametres integration enregistres.",
  integrationTokenRemoved: "Token integration supprime.",
  appSettingsSaved: "Parametres application enregistres.",
  inferredMeal: "Repas detecte",
  sensitivityAssistantTitle: "Assistant sensibilite insulinique",
  sensitivityNoData: "Pas assez d'evenements de correction.",
  sampleCount: "Nombre d'echantillons",
  avgDropPerUnit: "Baisse moyenne / 1U",
  suggestedFactor: "Facteur suggere",
  confidence: "Confiance",
  confidence_low: "Faible",
  confidence_medium: "Moyenne",
  confidence_high: "Elevee",
  healthScoreTitle: "Score sante",
  overallScore: "Score global",
  tirScore: "Score TIR",
  variabilityScore: "Score variabilite",
  hypoBurdenScore: "Score charge hypo",
  trendStabilityScore: "Score stabilite tendance",
  cvMetric: "CV",
  inRangeMetric: "Dans cible",
  lowMetric: "Charge basse",
  noHealthScore: "Donnees insuffisantes pour calculer le score sante.",
  widgetLayout: "Layout widget",
  widgetLayoutMinimal: "Minimal",
  widgetLayoutCompact: "Compact",
  widgetLayoutChart: "Graphique",
  widgetLayoutSaved: "Layout widget enregistre."
} as const;

const I18N = {
  en: EN,
  fr: FR
} as const;

export type TranslationKey = keyof typeof EN;
export type Translator = (key: TranslationKey) => string;

export function createTranslator(language: LanguageCode): Translator {
  const dictionary = I18N[language] ?? I18N.fr;
  return (key: TranslationKey): string => dictionary[key] ?? I18N.en[key] ?? key;
}
